!function(e,t){"function"==typeof define&&define.amd?define("DPicker.modules.arrowNavigation",["DPicker","moment"],t):"object"==typeof module&&module.exports?module.exports=t(require("dpicker"),require("moment")):e.DPicker.modules.arrowNavigation=t(e.DPicker,e.moment)}(this,function(e,t){"use strict";function r(e){return[].indexOf.call(e.parentNode.children,e)}function n(e,t){var r=e.previousElementSibling;if(r&&r.querySelector("button"))return r.querySelector("button").focus();if(r=e.parentNode.previousElementSibling,r=r?r.querySelector("td:last-child button"):null)return r.focus();var n=t.querySelector("tr:last-child").querySelectorAll("td.dpicker-active");return n[n.length-1].querySelector("button").focus()}function o(e,t){var r=e.nextElementSibling;return r&&r.querySelector("button")?r.querySelector("button").focus():(r=e.parentNode.nextElementSibling,r=r?r.querySelector("td:first-child button"):null,r?r.focus():t.querySelector("tr:first-child").nextElementSibling.querySelectorAll("td.dpicker-active")[0].querySelector("button").focus())}function i(e,t,n){var o=r(e),i=("up"===n?"previous":"next")+"ElementSibling",u=e.parentNode[i];if(u=u?u.children[o]:null,u&&u.classList.contains("dpicker-active"))return u.querySelector("button").focus();for(var c=t.querySelector("tr:"+("up"===n?"last-child":"first-child"));c;){if(c.children[o].classList.contains("dpicker-active"))return c.children[o].querySelector("button").focus();c=c[i]}}function u(e,t){return i(e,t,"up")}function c(e,t){return i(e,t,"down")}function l(e){var t=e.which||e.keyCode;if(!(t>40||t<37)){e.preventDefault();var r=e.target.parentNode,i=r.parentNode.parentNode;switch(t){case 37:return n(r,i);case 39:return o(r,i);case 38:return u(r,i);case 40:return c(r,i)}}}if(!e)throw new ReferenceError("DPicker is required for this extension to work");var a=e.modules.arrowNavigation={events:{dayKeyDown:l}};return a});