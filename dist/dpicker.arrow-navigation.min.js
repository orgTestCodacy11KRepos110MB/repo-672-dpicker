!function(e,r){"function"==typeof define&&define.amd?define("DPicker.modules.arrowNavigation",["DPicker","moment"],r):"object"==typeof module&&module.exports?module.exports=r(require("dpicker"),require("moment")):e.DPicker.modules.arrowNavigation=r(e.DPicker,e.moment)}(this,function(e,r){"use strict";function t(e){return[].findIndex.call(e.parentNode.children,function(r){return r===e})}function n(e,r){var t=e.previousElementSibling;if(t&&t.querySelector("button"))return t.querySelector("button").focus();if(t=e.parentNode.previousElementSibling,t=t?t.querySelector("td:last-child button"):null)return t.focus();var n=r.querySelector("tr:last-child").querySelectorAll("td.dpicker-active");return n[n.length-1].querySelector("button").focus()}function o(e,r){var t=e.nextElementSibling;return t&&t.querySelector("button")?t.querySelector("button").focus():(t=e.parentNode.nextElementSibling,t=t?t.querySelector("td:first-child button"):null,t?t.focus():r.querySelector("tr:first-child").nextElementSibling.querySelectorAll("td.dpicker-active")[0].querySelector("button").focus())}function i(e,r,n){var o=t(e),i=("up"===n?"previous":"next")+"ElementSibling",u=e.parentNode[i];if(u=u?u.children[o]:null,u&&u.classList.contains("dpicker-active"))return u.querySelector("button").focus();for(var c=r.querySelector("tr:"+("up"===n?"last-child":"first-child"));c;){if(c.children[o].classList.contains("dpicker-active"))return c.children[o].querySelector("button").focus();c=c[i]}}function u(e,r){return i(e,r,"up")}function c(e,r){return i(e,r,"down")}function l(e){var r=e.which||e.keyCode;if(!(r>40||r<37)){e.preventDefault();var t=e.target.parentNode,i=t.parentNode.parentNode;switch(r){case 37:return n(t,i);case 39:return o(t,i);case 38:return u(t,i);case 40:return c(t,i)}}}if(!e)throw new ReferenceError("DPicker is required for this extension to work");var a=e.modules.arrowNavigation={dayKeyDown:l};return a});